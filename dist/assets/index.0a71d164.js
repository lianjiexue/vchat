import{o as e,c as a,u as s,r as t,a as n,b as o,w as i,d as l,v as r,e as d,f as c,g as u,t as m,h as p,i as g,j as v,F as h,p as f,k as b,l as y,m as w,n as x,q as _,s as k,x as I,y as C,z as S,A}from"./vendor.eb6c91a4.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(s){const t=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((s,o)=>{const i=new URL(e,t);if(self[a].moduleMap[i])return s(self[a].moduleMap[i]);const l=new Blob([`import * as m from '${i}';`,`${a}.moduleMap['${i}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),n(r)},onload(){s(self[a].moduleMap[i]),n(r)}});document.head.appendChild(r)})),self[a].moduleMap={}}}("/assets/");const M={is_connect:0,onChange(){}},F=new Proxy(M,{get(e,a){console.log("获取")},set:(e,a,s)=>(e[a]=s,"is_connect"===a&&M.onChange(),!0)});var U="ws://chat.daguozhensi.com/ws",L=new WebSocket(U);setInterval((function(){if(console.log(M),0==M.is_connect)console.log("重新链接"),L=new WebSocket(U),F.is_connect=1;else{console.log(L);var e={type:"pong"};L.send(JSON.stringify(e))}}),45e3);var E=L;function D(e,a){return new Promise(((s,t)=>{fetch(e,{method:"post",body:a}).then((e=>e.json())).then((e=>{s(e)})).catch((e=>{t(e)}))}))}const j={expose:[],setup(n){const o=s();E.onmessage=function(e){var a=JSON.parse(e.data);console.log(a),"message"===a.type&&(o.commit("pushMessage",{message:a.msg}),o.commit("pushOtherMessage",{message:a.msg}))},E.bind=function(){var e=localStorage.getItem("uid");if(!parseInt(e))return console.log("未登录无法执行绑定"),!1;var a={type:"bind"};a.FromId=parseInt(localStorage.getItem("uid")),E.send(JSON.stringify(a))},E.onopen=function(e){console.log(e.data),E.bind(),F.is_connect=1},E.onclose=function(){console.log("链接关闭,15秒以后重连"),F.is_connect=0},M.onChange=function(){o.commit("setConnect",{is_connect:M.is_connect}),console.log(M),console.log("链接状态变化")};var i=localStorage.getItem("uid");if((i=parseInt(i))&&o.commit("setUserId",{user_id:i}),0!=o.state.user_id){var l=new FormData;l.append("uid",i),D("api/user/friends",l).then((e=>{200==e.code&&o.commit("setFriends",{friends:e.data})})),D("api/user/info",l).then((e=>{200==e.code&&o.commit("setUserInfo",{userInfo:e.data})}))}return(s,n)=>{const o=t("router-view");return e(),a(o)}}};var B="/assets/logo.4af976a3.png";const R={class:"login"},q={class:"navbar-brand"},O=o("img",{src:B,width:"112",height:"28"},null,-1),V={class:"box"},Y={class:"field"},K=o("label",{class:"label"},"邮箱",-1),Q={class:"control"},G={class:"field"},H=o("label",{class:"label"},"密码",-1),N={class:"control"},z=u(" 注册"),P={expose:[],setup(u){const m=n({email:"",password:""}),p=c(),g=s(),v=()=>{var e=new FormData;e.append("email",m.email),e.append("password",m.password),D("/api/login",e).then((e=>{200==e.code&&(localStorage.setItem("uid",e.data.user.id),g.commit("setFriends",e.data.friends),p.push("/"))})).catch((e=>{console.log(e)}))};return(s,n)=>{const c=t("router-link");return e(),a("div",R,[o("div",q,[o(c,{to:"/",class:"navbar-item"},{default:i((()=>[O])),_:1})]),o("form",V,[o("div",Y,[K,o("div",Q,[l(o("input",{class:"input",type:"email",placeholder:"输入邮箱","onUpdate:modelValue":n[1]||(n[1]=e=>d(m).email=e)},null,512),[[r,d(m).email]])])]),o("div",G,[H,o("div",N,[l(o("input",{class:"input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":n[2]||(n[2]=e=>d(m).password=e)},null,512),[[r,d(m).password]])])]),o("span",{class:"button is-primary",onClick:v},"登录"),o(c,{to:"/register",class:"button is-primary",style:{"margin-left":".75rem"}},{default:i((()=>[z])),_:1})])])}}},T={class:"card"},J={class:"card-content"},Z={class:"media"},W={class:"media-left"},X={class:"image is-48x48"},$={class:"media-content"},ee={class:"title is-6",style:{"padding-top":"10px"}},ae={class:"subtitle is-6"},se={class:"content"},te=o("br",null,null,-1),ne={style:{"text-align":"right"}},oe={datetime:"2016-1-1"},ie={class:"card-footer"},le={expose:[],props:{mood:{}},setup(s){const t=c();return(n,i)=>(e(),a("div",T,[o("div",J,[o("div",Z,[o("div",W,[o("figure",X,[o("a",{onClick:i[1]||(i[1]=e=>(e=>{if(localStorage.getItem("uid")==e.user.id)return!1;t.push("/oneuser/"+e.user.id)})(s.mood)),href:"javascript:void(0)"},[o("img",{src:s.mood.user.head_img,alt:"Placeholder image"},null,8,["src"])])])]),o("div",$,[o("p",ee,m(s.mood.user.nickname),1),o("p",ae,m(s.mood.user.title),1)])]),o("div",se,[o("div",{innerHTML:s.mood.mood.content},null,8,["innerHTML"]),te,o("div",ne,[o("time",oe,m(s.mood.mood.datetime),1)])])]),o("footer",ie,[o("a",{href:"javascript:void(0)",class:"card-footer-item",onClick:i[2]||(i[2]=e=>(e=>{if(localStorage.getItem("uid")==e.user.id)return!1;t.push("/chat/"+e.user.id)})(s.mood))},"回复"),o("a",{href:"javascript:void(0)",class:"card-footer-item",onClick:i[3]||(i[3]=(...e)=>n.report&&n.report(...e))},"举报")])]))}},re={},de={id:"side"},ce=u("首页"),ue=u("个人中心"),me=u("好友"),pe=u("消息"),ge=u("记录");re.render=function(s,n){const l=t("router-link");return e(),a("div",de,[o(l,{to:"/",class:"card-footer-item"},{default:i((()=>[ce])),_:1}),o(l,{to:"/user",class:"card-footer-item"},{default:i((()=>[ue])),_:1}),o(l,{to:"/friends",class:"card-footer-item"},{default:i((()=>[me])),_:1}),o(l,{to:"/messages",class:"card-footer-item"},{default:i((()=>[pe])),_:1}),o(l,{to:"/moods",class:"card-footer-item"},{default:i((()=>[ge])),_:1})])};const ve={class:"navbar",role:"navigation","aria-label":"main navigation"},he={class:"navbar-brand"},fe=o("img",{src:B},null,-1),be=o("span",{"aria-hidden":"true"},null,-1),ye=o("span",{"aria-hidden":"true"},null,-1),we=o("span",{"aria-hidden":"true"},null,-1),xe={expose:[],setup(l){const r=s(),c=n({state:{user_id:0,showSider:!1}}),u=p((()=>r.state.is_connect));g((()=>{var e=localStorage.getItem("user_id");r.commit("login",{user_id:e})}));const m=()=>{c.showSider=!1},f=()=>{c.showSider?c.showSider=!1:c.showSider=!0};return(s,n)=>{const l=t("router-link");return e(),a(h,null,[o("nav",ve,[o("div",he,[o(l,{to:"/",class:"navbar-item"},{default:i((()=>[fe])),_:1}),o("a",{role:"button",class:["navbar-burger",{is_connect_color:d(u)}],"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:f},[be,ye,we],2)])]),d(c).showSider?(e(),a(re,{key:0,onClick:m})):v("",!0)],64)}}};const _e=y();f("data-v-376a9b9e");const ke={id:"home"},Ie={key:1},Ce=o("div",{class:"notification"}," 暂时无心情,您可以发表心情让他人看到,且只能被一个人看到",-1),Se={key:2,class:"modal",style:{display:"block"}},Ae={class:"modal-content",style:{margin:"0px",padding:"20px"}},Me=o("p",{class:" is-5by3"},[o("div",{class:"textarea",placeholder:"输入内容",contenteditable:""})],-1),Fe={style:{margin:"10px"}},Ue=o("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABhElEQVRYR+2WsUrEQBCG/8nlAj6AjZrodYn4EAq2io21Yq+v4NkrgmIpaGupYmvtEyRiYcyhzbUiXoI3EjHg5bKX7LLhLC5d2N1/Pub/B4Yw5o/GXB8TgKEO+HZzm4CtOqxh4NLrJBd/tQcAfMdqE7BfR/FMk4EDL4rb2f8AQOBYrwBmuN9fqQOCDOMewJsbxbMiAE4P3CiuJZyBYw3p5zswASjsgD9nLktlwjRDL/wM82+ULAhs6xyEHSkAIHSjuKUF4MmxFr+Yz2QAGMat1+kdaQGQKVx2V8mCMlGZcyWAMgtE7S4CUwKoEMLCwGkDSIVGjqFg5LQCyPg86q6SBbqKpzoTgP/fAd9pnhBoV+Q7ER6Sj3h1qYv3R9vaYMIxgAWZnDD41IuSvcKF5Dco1wDWRKLZtkSGcQdgSqY4gBs3iteFO2GVEUoBqNG4AvN0fr+ThPm5Xnn1ygIE4BlAS0dxVQDoKq4EoLO4LMAmE817L71DFa+Fk6VTTEWrcghVxKu8+QZIE/ghh7Z5YgAAAABJRU5ErkJggg=="},null,-1);b();const Le={expose:[],setup(t){const i=s();g((()=>{console.log("程序初始化完成，调用消息服务器"),r()}));const l=p((()=>i.state.mood)),r=()=>{var e=localStorage.getItem("uid");h.user_id=e;var a=new FormData;a.append("uid",e),D("/api/mood/one",a).then((e=>{200==e.code&&i.commit("oneMood",{mood:e.data})}))},c=()=>{h.show=!0},u=()=>{h.show=!1},m=()=>{r()},h=n({user_id:0,show:!1,content:""});return _e(((s,t)=>(e(),a("div",ke,[o(xe),d(l)?(e(),a(le,{key:0,mood:d(l)},null,8,["mood"])):v("",!0),d(l)?v("",!0):(e(),a("div",Ie,[Ce])),o("button",{class:"button is-danger",style:{"margin-top":"120px","margin-left":"130px"},onClick:m},"刷新"),d(h).show?(e(),a("div",Se,[o("div",{class:"modal-background",onClick:t[1]||(t[1]=e=>{h.show=!1})}),o("div",Ae,[Me,o("p",Fe,[o("button",{class:"button is-primary",onClick:t[2]||(t[2]=e=>(()=>{console.log("发表心情");var e=document.querySelector(".textarea").innerHTML;if(h.user_id){var a=new FormData;a.append("uid",h.user_id),a.append("content",e),D("/api/mood/add",a).then((e=>{200==e.code&&(document.querySelector(".textarea").innerHTML="")})),h.show=!1}})())},"确定")])]),o("button",{class:"modal-close is-large","aria-label":"close",onClick:u})])):v("",!0),o("span",{onClick:c,class:"write"},[Ue])]))))},__scopeId:"data-v-376a9b9e"},Ee={class:"register"},De={class:"navbar-brand"},je=o("img",{src:B,width:"112",height:"28"},null,-1),Be={class:"box",onsubmit:"return false"},Re={class:"field"},qe=o("label",{class:"label"},"邮箱",-1),Oe={class:"control"},Ve={class:"field"},Ye=o("label",{class:"label"},"密码",-1),Ke={class:"control"},Qe={class:"field"},Ge=o("label",{class:"label"},"验证",-1),He={class:"control"},Ne={expose:[],setup(s){const u=n({email:"",password:"",verify:""}),m=c(),p=()=>{var e=new FormData;e.append("email",u.email),e.append("password",u.password),e.append("verify",u.verify),D("/api/register",e).then((e=>{200==e.code&&(localStorage.setItem("uid",e.data.uid),m.push("/"))})).catch((e=>{console.log(e)}))};return(s,n)=>{const c=t("router-link");return e(),a("div",Ee,[o("div",De,[o(c,{to:"/",class:"navbar-item"},{default:i((()=>[je])),_:1})]),o("div",Be,[o("div",Re,[qe,o("div",Oe,[l(o("input",{class:"input",type:"email",placeholder:"输入邮箱","onUpdate:modelValue":n[1]||(n[1]=e=>d(u).email=e)},null,512),[[r,d(u).email]])])]),o("div",Ve,[Ye,o("div",Ke,[l(o("input",{class:"input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":n[2]||(n[2]=e=>d(u).password=e)},null,512),[[r,d(u).password]])])]),o("div",Qe,[Ge,o("div",He,[l(o("input",{class:"input",type:"verify",placeholder:"朝辞白帝彩云间","onUpdate:modelValue":n[3]||(n[3]=e=>d(u).verify=e)},null,512),[[r,d(u).verify]])])]),o("span",{class:"button is-primary",onClick:p},"确定")])])}}};const ze={class:"messages",style:{"margin-bottom":"50px"}},Pe={class:"navbar",role:"navigation","aria-label":"main navigation"},Te={class:"navbar-brand"},Je=o("svg",{t:"1620194750200",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2021",width:"32",height:"32"},[o("path",{d:"M700.29866667 942.54933333c-5.48266667 0-10.976-2.10133333-15.136-6.304l-405.86666667-408.90666666c-8.24533333-8.30933333-8.256-21.71733333-0.02133333-30.03733334l405.86666666-409.96266666c8.288-8.37333333 21.792-8.43733333 30.16533334-0.14933334 8.37333333 8.288 8.43733333 21.792 0.14933333 30.16533334L324.46933333 512.29866667l390.96533334 393.888c8.29866667 8.36266667 8.24533333 21.86666667-0.10666667 30.16533333-4.16 4.13866667-9.58933333 6.19733333-15.02933333 6.19733333z","p-id":"2022",fill:"#8a8a8a"})],-1),Ze={style:{"margin-top":"15px","margin-left":"35%"}},We={class:"msg-item"},Xe={class:"msg-datetime",style:{"text-align":"center"}},$e={class:"msg-content"},ea={key:0,style:{display:"flex","justify-content":"flex-end","align-items":"center"}},aa={class:"msgcontent",style:{"background-color":"rgb(0, 196, 167)"}},sa={style:{color:"#fff"}},ta={class:"msguserhead",style:{"min-width":"45px"}},na={key:1,style:{display:"flex","justify-content":"flex-start","align-items":"center"}},oa={class:"msguserhead",style:{"min-width":"45px"}},ia={class:"msgcontent",style:{background:"#eee"}},la={class:"chat"},ra=o("div",{class:"send"},null,-1),da={expose:[],setup(c){const u=n({to_id:null,uid:null,content:"",toInfo:{}}),v=s(),f=p((()=>{var e=new Array;return console.log("消息读入"),v.state.messages.map(((a,s)=>{a.to_id==u.to_id&&a.from_id==u.uid&&e.push(a),a.to_id==u.uid&&a.from_id==u.to_id&&e.push(a)})),e})),b=_();g((()=>{console.log("执行获取用户"),u.to_id=b.params.uid,u.uid=localStorage.getItem("uid");var e=new FormData;e.append("uid",u.to_id),D("/api/user/info",e).then((e=>{console.log(e.data),200==e.code&&(u.toInfo=e.data)}))}));const y=p((()=>v.state.userInfo)),k=()=>{var e,a={};if(a.message_id=null,a.from_id=localStorage.getItem("uid"),a.to_id=u.to_id,a.content=u.content,a.datetime=(e=new Date).getFullYear()+"."+(e.getMonth()+1)+"."+e.getDate(),a.to_id!=a.from_id){v.commit("pushMessage",{message:a});var s=new FormData;s.append("from_id",a.from_id),s.append("to_id",a.to_id),s.append("content",a.content),D("api/message/new",s).then((e=>{console.log(e)})),u.content=""}};return(s,n)=>{const c=t("router-link");return e(),a(h,null,[o("div",ze,[o("nav",Pe,[o("div",Te,[o(c,{to:"/",class:"navbar-item"},{default:i((()=>[Je])),_:1}),o("b",Ze,m(d(u).toInfo.nickname),1)])]),(e(!0),a(h,null,w(d(f),(s=>(e(),a("div",We,[o("div",Xe,m(s.datetime),1),o("div",$e,[s.from_id==d(u).uid?(e(),a("div",ea,[o("div",aa,[o("span",sa,m(s.content),1)]),o("div",ta,[o("img",{src:d(y).head_img,style:{width:"50px"}},null,8,["src"])])])):(e(),a("div",na,[o("div",oa,[o("img",{src:d(u).toInfo.head_img,style:{width:"50px"}},null,8,["src"])]),o("div",ia,[o("span",null,m(s.content),1)])]))])])))),256))]),o("div",la,[l(o("textarea",{class:"v-textarea","onUpdate:modelValue":n[1]||(n[1]=e=>d(u).content=e),style:{border:"1px solid #ffdd57"},onKeyup:x(k,["enter"])},null,40,["onKeyup"]),[[r,d(u).content]]),o("button",{class:"button is-primary",onClick:k}," 发送")]),ra],64)}}},ca={id:"user"},ua={class:"navbar",role:"navigation","aria-label":"main navigation"},ma={class:"navbar-brand"},pa=o("img",{src:B,width:"112",height:"28"},null,-1),ga={style:{display:"none"}},va={style:{display:"flex","justify-content":"center"}},ha={style:{"text-align":"center",margin:"20px"}},fa={style:{"text-align":"center",margin:"20px"}},ba={expose:[],setup(n){const l=c(),r=s(),u=p((()=>r.state.userInfo));console.log(u);const g=()=>{localStorage.setItem("uid",""),l.push("/")},v=()=>{document.querySelector("input[name='file']").click()},h=()=>{var e=document.querySelector("input[name='file']"),a=new FormData;a.append("file",e.files[0]),a.append("uid",localStorage.getItem("uid")),D("/api/user/upload",a).then((e=>{200==e.code&&r.commit("setUserHeadImg",{head_img:e.data.head_img})}))};return(s,n)=>{const l=t("router-link");return e(),a("div",ca,[o("nav",ua,[o("div",ma,[o(l,{to:"/",class:"navbar-item"},{default:i((()=>[pa])),_:1})])]),o("div",ga,[o("input",{type:"file",name:"file",onChange:h},null,32)]),o("div",va,[o("div",{style:{"border-radius":"150px",width:"150px",overflow:"hidden",height:"150px"},onClick:v},[o("img",{src:d(u).head_img,style:{width:"150px",height:"150px"}},null,8,["src"])])]),o("div",ha,m(d(u).nickname),1),o("div",fa,m(d(u).description),1),o("div",{style:{display:"flex","justify-content":"center"}},[o("button",{class:"button is-danger",onClick:g,style:{margin:"10px"}},"退出")])])}}},ya={id:"user",style:{padding:"10px"}},wa={class:"navbar",role:"navigation","aria-label":"main navigation"},xa={class:"navbar-brand"},_a=o("img",{src:B,width:"112",height:"28"},null,-1),ka={style:{margin:"20px 0px"}},Ia={expose:[],setup(s){const l=_();c(),console.log(l);const r=n({info:{}});return g((()=>{var e=l.params.uid,a=new FormData;a.append("uid",e),D("/api/user/info",a).then((e=>{console.log(e),200==e.code&&(r.info=e.data)}))})),(s,n)=>{const l=t("router-link");return e(),a("div",ya,[o("nav",wa,[o("div",xa,[o(l,{to:"/",class:"navbar-item"},{default:i((()=>[_a])),_:1})])]),o("div",null,[o("div",null,[o("img",{src:d(r).info.head_img},null,8,["src"])]),o("div",null,[o("span",null,m(d(r).info.nickname),1)]),o("div",ka,m(d(r).info.description),1)])])}}},Ca={id:"friends",style:{padding:"10px"}},Sa={class:"navbar",role:"navigation","aria-label":"main navigation"},Aa={class:"navbar-brand"},Ma=o("img",{src:B,width:"112",height:"28"},null,-1),Fa={class:"menu-list",style:{"margin-top":"10px"}},Ua={style:{display:"flex","justify-content":"flex-start","border-bottom":"1px solid #eee","padding-top":"10px"}},La={expose:[],setup(n){const l=s(),r=c(),u=p((()=>(console.log(l.state),l.state.friends)));return console.log(u.value),(s,n)=>{const l=t("router-link");return e(),a("div",Ca,[o("nav",Sa,[o("div",Aa,[o(l,{to:"/",class:"navbar-item"},{default:i((()=>[Ma])),_:1})])]),o("ul",Fa,[(e(!0),a(h,null,w(d(u),(s=>(e(),a("li",Ua,[o("div",{class:"head",onClick:e=>(e=>{console.log(e),r.push("/user/info/"+e.id)})(s),style:{width:"60px","border-radius":"10px",overflow:"hidden"}},[o("img",{src:s.head_img},null,8,["src"])],8,["onClick"]),o("div",{class:"name",onClick:e=>(e=>{r.push("/chat/"+e.id)})(s),style:{"line-height":"50px","margin-left":"50px"}},m(s.nickname),9,["onClick"])])))),256))])])}}},Ea={id:"messages"},Da={class:"navbar",role:"navigation","aria-label":"main navigation"},ja={class:"navbar-brand"},Ba=o("img",{src:B,width:"112",height:"28"},null,-1),Ra={class:"notification is-success"},qa=o("div",{class:"head"},null,-1),Oa={expose:[],setup(n){const l=c(),r=s();r.state.user_id;const u=p((()=>{var e=new Array;return console.log("消息读入"),r.state.othermessages.map(((a,s)=>{e.push(a)})),console.log(e),e}));return(s,n)=>{const c=t("router-link");return e(),a("div",Ea,[o("nav",Da,[o("div",ja,[o(c,{to:"/",class:"navbar-item"},{default:i((()=>[Ba])),_:1})])]),(e(!0),a(h,null,w(d(u),((s,t)=>(e(),a("div",{style:{margin:"10px"},key:t},[o("div",Ra,[o("button",{class:"delete",onClick:e=>(e=>{r.commit("removeMessage",e)})(t)},null,8,["onClick"]),qa,o("div",{class:"msg",onClick:e=>{return a=s,void l.push("/chat/"+a.from_id);var a}},m(s.content),9,["onClick"])])])))),128))])}}},Va={id:"user"},Ya={class:"navbar",role:"navigation","aria-label":"main navigation"},Ka={class:"navbar-brand"},Qa=o("img",{src:B,width:"112",height:"28"},null,-1),Ga={style:{display:"flex","justify-content":"center"}},Ha={style:{"border-radius":"150px",width:"150px",overflow:"hidden",height:"150px"}},Na={expose:[],setup(s){const n=_(),l=k({}),r=k(0);g((()=>{var e=new FormData,a=n.params.fid,s=localStorage.getItem("uid");e.append("fid",a),e.append("uid",s),D("/api/user/follow",e).then((e=>{200==e.code&&(l.value=e.data.user,r.value=e.data.is_follow)}))}));const d=()=>{var e=new FormData,a=n.params.fid,s=localStorage.getItem("uid");e.append("uid",s),e.append("fid",a),D("/api/friend/follow",e).then((e=>{200==e.code&&(r.value=1)}))},c=()=>{var e=new FormData,a=n.params.fid,s=localStorage.getItem("uid");e.append("uid",s),e.append("fid",a),D("/api/friend/unfollow",e).then((e=>{200==e.code&&(r.value=0)}))};return(s,n)=>{const u=t("router-link");return e(),a("div",Va,[o("nav",Ya,[o("div",Ka,[o(u,{to:"/",class:"navbar-item"},{default:i((()=>[Qa])),_:1})])]),o("div",Ga,[o("div",Ha,[o("img",{src:l.value.head_img,style:{width:"150px",height:"150px"}},null,8,["src"])])]),o("div",null,m(l.value.nickname),1),o("div",null,m(l.value.description),1),r.value?v("",!0):(e(),a("button",{key:0,class:"button is-primary",onClick:d,style:{margin:"10px"}},"关注")),r.value?(e(),a("button",{key:1,class:"button is-danger",onClick:c,style:{margin:"10px"}},"取消关注")):v("",!0)])}}},za={},Pa={class:"moods"};za.render=function(s,t){return e(),a("div",Pa)};const Ta=[{path:"/",component:Le,name:"Home"},{path:"/login",component:P,name:"Login"},{path:"/chat",component:da,name:"Chat"},{path:"/chat/:uid",component:da,name:"Chat"},{path:"/user",component:ba,name:"User"},{path:"/friends",component:La,name:"Friend"},{path:"/messages",component:Oa,name:"Messages"},{path:"/Register",component:Ne,name:"Register"},{path:"/user/info/:uid",component:Ia,name:"UserFriend"},{path:"/oneuser/:fid",component:Na,name:"OneUser"},{path:"/moods/",component:za,name:"Moods"}],Ja=I({history:C(),routes:Ta});Ja.beforeEach(((e,a,s)=>{"Home"!==e.name&&"Login"!==e.name&&"Register"!==e.name?localStorage.getItem("uid")?s():s({name:"Login"}):s()}));const Za=S({state:()=>({user_id:0,messages:[],mood:null,friends:[],userInfo:{},othermessages:[],is_connect:0}),mutations:{login(e,a){e.user_id=a.user_id},pushMessage(e,a){e.messages.push(a.message)},oneMood(e,a){e.mood=a.mood},setUserId(e,a){e.user_id=a.user_id},setFriends(e,a){e.friends=a.friends},setUserInfo(e,a){e.userInfo=a.userInfo},setUserHeadImg(e,a){e.userInfo.head_img=a.head_img},removeMessage(e,a){e.messages.splice(a.start,1)},pushOtherMessage(e,a){e.othermessages.push(a.message)},setConnect(e,a){console.log("当前的链接状态",a),e.is_connect=a.is_connect}}});A(j).use(Ja).use(Za).mount("#app");
